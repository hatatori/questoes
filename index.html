<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

<style>

	*{
		transition: 0.2s;
		/*font-family: roboto*/
		font-family: 'Roboto', sans-serif,monospace;
	}

	body{
		background-color: #ddd;
	}

	#bloco > div{
		background-color: white;
		margin: 10;
		width: 800;
		margin: 20 auto;
		padding: 10;
		border-radius: 5px;
		box-shadow: 5px 5px 10px rgba(0,0,0,0.2);
		max-width: 90%;
	}

	
	#bloco div > label > div,#bloco div > div{ 
		padding: 10;
		border-radius:2px;
	}

	input[type='radio']{display: none}
	input[type='radio']:checked + *{background-color: rgba(0,0,0,0.1);}

	.active input[type='radio']:checked + *{background-color: rgba(255,0,0,0.3);}
	.active .res input[type='radio']:checked + *{background-color: rgba(0,255,0,0.3);}

	input[type='radio']:checked + button{
		height: 40
	}

	button{
		border: 1px solid #ddd;
		border-radius: 5px;
		background-color: transparent;
		padding: 10;
		margin: 10;
		outline: none;
		color: #555;
		height: 40;

		height: 0;
		padding: 0;
		border: none;
		overflow: hidden;
		font-family: monospace;
		margin: 0;

	}
	
	button:hover{
		box-shadow: 3px 3px #ddd;
		cursor: pointer;
	}

	.show button{
		height: 40;
		padding: 10;
		border: 1px solid #ddd;
		overflow: hidden;
		margin: 10;
	}

	/*.pergunta{ font-family: monospace; }*/

</style>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- <meta charset="utf-8"> -->

<div id="bloco">
	<!-- 
	<div>
		<div class='pergunta'>pergunta</div>
		<label><input type="radio" name="q0"><div>a</div></label>
		<label class='res'><input type="radio" name="q0"><div>b</div></label>
		<label><input type="radio" name="q0"><div>c</div></label>
		<label><input type="radio" name="q0"><div>d</div></label>
		<button>verificar resposta</button>
	</div>

	<div class='active'>
		<label><input type="radio" name="q1"><div>ok</div></label>
		<label class='res'><input type="radio" name="q1"><div>ok</div></label>
		<label><input type="radio" name="q1"><div>ok</div></label>
		<label><input type="radio" name="q1"><div>ok</div></label>
		<button>ok</button>
	</div> -->


</div>




<script>
	
	// index.html#matematica

	materia = window.location.href.split("#")[1]
	num = 0

	fetch(materia+'.txt').then(e=>{
		return e.text()
	}).then(e=>{
		textarea = document.createElement("textarea")
		textarea.value = e
		document.body.appendChild(textarea)

		t = textarea.value.split("-----\n")

		for(i of t){
			pergunta = i.split("\n\n")[0]
			enun = i.split("\n\n")[1]
			
			bloquinho(pergunta,enun,num++)
		}

		reajustar()

		textarea.remove()
	})

	function reajustar(){
		bt = document.querySelectorAll("button")
		for(i of bt){
			i.onclick=function(e){
				this.parentElement.classList.add("active")
			}
		}

		label = document.querySelectorAll("label")
		for(i of label){
			i.onclick=function(e){
				this.parentElement.classList.add("show")
			}
		}
	}


	function bloquinho(pergunta,enun,numero){
		// numero = 0

		// txt = `a
		// b
		// **c
		// d`

		txt2 = enun.split("\n")

		txt3 = txt2.map(e=>{
			if(e.match(/\*{2}/g))
				return "<label class='res'><input type='radio' name='q"+numero+"'><div>"+e.replace(/\*\*/g,"")+"</div></label>"
			else
				return "<label><input type='radio' name='q"+numero+"'><div>"+e+"</div></label>"
		}).join("")

		

		div = document.createElement('div')
		div.innerHTML = "<div class='pergunta'>"+(numero+1)+") "+pergunta+"</div>"
		div.innerHTML += txt3
		div.innerHTML += "<button>verificar resposta</button>"

		bloco.appendChild(div)
	}



</script>